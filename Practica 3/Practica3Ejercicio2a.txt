PA EQU 30h
PB EQU 31h
CA EQU 32h
CB EQU 33h

ORG 1000h
CHAR DB "A"

ORG 2000h

IN AL,PA
AND AL,0FDh
OUT PA,AL

IN AL,CA
AND AL,0FDh
OR AL,1
OUT CA,AL

MOV AL,0
OUT CB,AL

POLL: IN AL,PB
AND AL,1
JNZ POLL

MOV AL,CHAR
OUT PB,AL

IN AL,PA
OR AL,2
OUT PA,AL

INT 0
END